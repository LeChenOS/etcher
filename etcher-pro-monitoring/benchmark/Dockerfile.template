FROM balenalib/%%BALENA_MACHINE_NAME%%-debian-node:12.6-buster
RUN apt-get update
RUN apt-get install -y stress htop iotop dcfldd
WORKDIR /usr/src/app
COPY flash.ts package.json package-lock.json ./
RUN npm i
ENV UDEV=1
ENV UV_THREADPOOL_SIZE=128
RUN echo "echo \"stress, htop, iotop, dd and dcfldd are installed, try running ./flash.ts --help\"" >> /etc/bash.bashrc
CMD sleep infinity
